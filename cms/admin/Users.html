<section style="padding-bottom:0; padding-top:8px; display:flex; flex-flow: row; justify-content:space-between">
        <span style="font-weight: bold">
            Users <tag>{{fr.length}}</tag>
        </span>    
    </section>
    
    <section style="flex:1; padding-bottom:1rem; padding-top:0; overflow:auto">
        <div id="testbtn" style="display:box; display:flex; height:100%; overflow:auto; flex:1">
            <f2table style="width:100%" rows={{rows}} visible="true" headerFixedHeight={{false}} alternateColor="{{true}}" 
                columns={{columns}} ipp="50" refresh={{refresh}} fr={{fr}} row={{row}} row_style="align-items: start !important;"
                variableRowHeight={{false}} showSearch={{true}} showPaginator={{true}} showHeaders={{true}} selectid={{selectid}} loading={{loading}} nodata={{false}} >
            </f2table>
        </div>
    </section>
    
    
     
    
    <script>
      component.exports = {
        onrender: async function () {
            console.log('Users onrender')
            var self = this;
            window.Users = self;
            this.on('refresh', async function(){
                console.log('refreshing companies')
                self.set('loading', true)
                var [resp,err] = await fetch2('api/v2/SA_users_list')
                self.set('loading', false)
                if (resp) self.set('rows', resp.results)
            })
            this.fire('refresh')
            
            this.on('*.clickhandlerfromtable', function(e,e1,e2){
    //            console.log('clickhandlerfromtable',e,e1,e2)
          //      self.set('currFilterIndex', 'fgr'+e)
          //      self.set('showModal',true)
            })
            
    
        },        
        data:function() {
                return {
                    G:null
                    //, columns:null
                    , rows:[]
                    , refresh:0
                    , fr:[]
                    , loading:false
                    , currFilterIndex:''
                    , row:{}
                    , addNewCompany:false         
                     , columns: [
            //        {visible:true , filter:false, compId:"id", compType:"text", label:"Naziv", w:"20%", template:"<img style='height:2em' src='objengine/image.php?filename={{viewport[i][.compId]}}&h=140'>"}
                       // {visible:true , filter:true, compId:"id", compType:"text", label:"Naziv", w:"100%",
                      //  template:"<div> {{viewport[i]['id']}}</div>" },Number(77).toFixed(2)  , template:"{{Number(viewport[i][compId]).toFixed(2)}}"
    
                      {visible:true , filter:false, compId:"profile_image", compType:"text", label:"", w:"100px"
                      , template:`
                        {{#if viewport[i].profile_image}}
                            <img src='https://resize-service.buildcon.org/?url={{viewport[i].profile_image}}&width=100' style="width:100%">
                        {{else}}
                            <img src='https://v2dev.buildcon.org/assets/img/icons/sc.svg' style="width:100%">
                        {{/if}}` },
                      {visible:true , filter:true, compId:"user_name", compType:"text", label:"User", w:"30%", showDataTips:true,
                        template:`<strong>{{viewport[i].title}} {{viewport[i].firstname}} {{viewport[i].lastname}}</strong>
                      <p style="margin:0"><a href="mailto:{{viewport[i].email}}">{{viewport[i].email}}</a></p>
                      <p><a href="tel:{{viewport[i].phone}}">{{viewport[i].phone}}</a></p>`},
                      {visible:false , filter:true, compId:"email", compType:"text", label:"email", w:"12em"},
                      {visible:false , filter:true, compId:"phone", compType:"text", label:"phone", w:"12em"},
    
                      {visible:true , filter:true, compId:"name", compType:"text", label:"Company / Construction / Role ", w:"100%", 
                        template:`
    <table>
        <thead>
            <tr>
                <th style="width: 16rem;">Company</th>
                <th style="width: calc(100% - 29rem)">Construction</th>
                <th style="width: 13rem;">Role</th>
            </tr>
        </thead>
        <tbody>
            {{#each viewport[i].cons:i}}
            <tr>
                <td>{{.company_name}}</td>
                <td>{{.construction_name}}</td>
                <td>{{.role_name}}</td>
            </tr>
            {{/each}}
        </tbody>
    </table>                        
                        ` },
                    ]
                }
            }
      };
      </script>